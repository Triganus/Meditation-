import React, { useState, useEffect, useCallback, useMemo } from 'react';
import './DailyQuote.css';

const DailyQuote = () => {
  const [currentQuote, setCurrentQuote] = useState(null);
  const [isVisible, setIsVisible] = useState(false);

  // –ö–æ–ª–ª–µ–∫—Ü–∏—è –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏—Ö —Ü–∏—Ç–∞—Ç –æ –º–µ–¥–∏—Ç–∞—Ü–∏–∏, –∂–∏–∑–Ω–∏ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º –º–∏—Ä–µ
  const quotes = useMemo(() => [
    {
      text: "–ú–∏—Ä –ø—Ä–∏—Ö–æ–¥–∏—Ç –∏–∑–Ω—É—Ç—Ä–∏. –ù–µ –∏—â–∏—Ç–µ –µ–≥–æ —Å–Ω–∞—Ä—É–∂–∏.",
      author: "–ë—É–¥–¥–∞",
      category: "meditation"
    },
    {
      text: "–ú–µ–¥–∏—Ç–∞—Ü–∏—è ‚Äî —ç—Ç–æ –Ω–µ –±–µ–≥—Å—Ç–≤–æ –æ—Ç –∂–∏–∑–Ω–∏, –∞ –≤—Å—Ç—Ä–µ—á–∞ —Å –Ω–µ–π.",
      author: "–¢–∏—á –ù—è—Ç –•–∞–Ω—å",
      category: "meditation"
    },
    {
      text: "–°—á–∞—Å—Ç—å–µ –Ω–µ –≥–æ—Ç–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç. –û–Ω–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç –≤–∞—à–∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π.",
      author: "–î–∞–ª–∞–π-–ª–∞–º–∞",
      category: "happiness"
    },
    {
      text: "–¢–∏—à–∏–Ω–∞ ‚Äî —ç—Ç–æ –∏—Å—Ç–æ—á–Ω–∏–∫ –≤–µ–ª–∏–∫–æ–π —Å–∏–ª—ã.",
      author: "–õ–∞–æ-—Ü–∑—ã",
      category: "silence"
    },
    {
      text: "–í—á–µ—Ä–∞ ‚Äî –∏—Å—Ç–æ—Ä–∏—è, –∑–∞–≤—Ç—Ä–∞ ‚Äî –∑–∞–≥–∞–¥–∫–∞, —Å–µ–≥–æ–¥–Ω—è ‚Äî –ø–æ–¥–∞—Ä–æ–∫.",
      author: "–≠–ª–µ–æ–Ω–æ—Ä–∞ –†—É–∑–≤–µ–ª—å—Ç",
      category: "present"
    },
    {
      text: "–î—ã—Ö–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –º–æ—Å—Ç –º–µ–∂–¥—É —Ç–µ–ª–æ–º –∏ —Ä–∞–∑—É–º–æ–º.",
      author: "–¢–∏—á –ù—è—Ç –•–∞–Ω—å",
      category: "breathing"
    },
    {
      text: "–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ —É–º–∞ ‚Äî —ç—Ç–æ –æ–¥–Ω–æ –∏–∑ –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã—Ö –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç–µ–π –º—É–¥—Ä–æ—Å—Ç–∏.",
      author: "–ë—É–¥–¥–∞",
      category: "peace"
    },
    {
      text: "–°–∞–º—ã–π –¥–ª–∏–Ω–Ω—ã–π –ø—É—Ç—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –æ–¥–Ω–æ–≥–æ —à–∞–≥–∞.",
      author: "–õ–∞–æ-—Ü–∑—ã",
      category: "journey"
    },
    {
      text: "–ë—É–¥—å—Ç–µ —Å–æ–±–æ–π. –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–æ–ª–∏ —É–∂–µ –∑–∞–Ω—è—Ç—ã.",
      author: "–û—Å–∫–∞—Ä –£–∞–π–ª—å–¥",
      category: "authenticity"
    },
    {
      text: "–í —Ç–∏—à–∏–Ω–µ –º—ã –Ω–∞—Ö–æ–¥–∏–º –Ω–∞—à—É –∏—Å—Ç–∏–Ω–Ω—É—é –ø—Ä–∏—Ä–æ–¥—É.",
      author: "–≠–∫—Ö–∞—Ä—Ç –¢–æ–ª–ª–µ",
      category: "silence"
    },
    {
      text: "–ú–µ–¥–∏—Ç–∞—Ü–∏—è ‚Äî —ç—Ç–æ –Ω–µ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è, –∞ –¥–µ-–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è.",
      author: "–û—à–æ",
      category: "meditation"
    },
    {
      text: "–õ—é–±–æ–≤—å –∫ —Å–µ–±–µ ‚Äî —ç—Ç–æ –Ω–∞—á–∞–ª–æ —Ä–æ–º–∞–Ω–∞ –¥–ª–∏–Ω–æ—é –≤ –∂–∏–∑–Ω—å.",
      author: "–û—Å–∫–∞—Ä –£–∞–π–ª—å–¥",
      category: "self-love"
    },
    {
      text: "–ù–∞—Å—Ç–æ—è—â–∏–π –º–æ–º–µ–Ω—Ç ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è, –Ω–∞–¥ –∫–æ—Ç–æ—Ä—ã–º –º—ã –∏–º–µ–µ–º –≤–ª–∞—Å—Ç—å.",
      author: "–¢–∏—á –ù—è—Ç –•–∞–Ω—å",
      category: "present"
    },
    {
      text: "–ú—É–¥—Ä–æ—Å—Ç—å –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–µ –æ—Ç –≤–æ–∑—Ä–∞—Å—Ç–∞, –∞ –æ—Ç –º–µ–¥–∏—Ç–∞—Ü–∏–∏ –∏ —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏—è.",
      author: "–û—à–æ",
      category: "wisdom"
    },
    {
      text: "–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Ç–æ, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å, –≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.",
      author: "–ú–µ–ª–æ–¥–∏ –ë–∏—Ç—Ç–∏",
      category: "gratitude"
    },
    {
      text: "–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ–∫–æ–π –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –≤—ã–±–æ—Ä–∞ –Ω–µ –ø–æ–∑–≤–æ–ª—è—Ç—å –¥—Ä—É–≥–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–∏ —ç–º–æ—Ü–∏–∏.",
      author: "–î–∞–ª–∞–π-–ª–∞–º–∞",
      category: "peace"
    },
    {
      text: "–ö–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç ‚Äî —ç—Ç–æ –Ω–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ.",
      author: "–¢.–°. –≠–ª–∏–æ—Ç",
      category: "renewal"
    },
    {
      text: "–î–æ—Ä–æ–≥–∞ –∫ –ø—Ä–æ—Å–≤–µ—Ç–ª–µ–Ω–∏—é –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –ø—Ä–∏–Ω—è—Ç–∏–µ —Å–µ–±—è.",
      author: "–ö–∞—Ä–ª –Æ–Ω–≥",
      category: "acceptance"
    },
    {
      text: "–°–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ –∫ —Å–µ–±–µ ‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–∞ –≤—Å–µ–≥–æ —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏—è.",
      author: "–ü–µ–º–∞ –ß–æ–¥—Ä–æ–Ω",
      category: "compassion"
    },
    {
      text: "–í –ø—Ä–æ—Å—Ç–æ—Ç–µ —Å–∫—Ä—ã—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –∏–∑–æ—â—Ä–µ–Ω–Ω–æ—Å—Ç—å.",
      author: "–õ–µ–æ–Ω–∞—Ä–¥–æ –¥–∞ –í–∏–Ω—á–∏",
      category: "simplicity"
    },
    {
      text: "–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –Ω–∞–π—Ç–∏ –∏—Å—Ç–∏–Ω–Ω–æ–µ —Å—á–∞—Å—Ç—å–µ ‚Äî —ç—Ç–æ —Ä–∏—Å–∫–Ω—É—Ç—å –±—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫—Ä—ã—Ç—ã–º.",
      author: "–ß–∞–∫ –ü–∞–ª–∞–Ω–∏–∫",
      category: "happiness"
    },
    {
      text: "–ú–µ–¥–∏—Ç–∞—Ü–∏—è ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± –±—ã—Ç—å —Å —Ç–µ–º, —á—Ç–æ –µ—Å—Ç—å, –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —ç—Ç–æ.",
      author: "–î–∂–æ–Ω –ö–∞–±–∞—Ç-–ó–∏–Ω–Ω",
      category: "acceptance"
    },
    {
      text: "–í–∞—à–∞ –∑–∞–¥–∞—á–∞ –Ω–µ –∏—Å–∫–∞—Ç—å –ª—é–±–æ–≤—å, –∞ –Ω–∞–π—Ç–∏ –±–∞—Ä—å–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –ø–æ—Å—Ç—Ä–æ–∏–ª–∏ –ø—Ä–æ—Ç–∏–≤ –Ω–µ—ë.",
      author: "–†—É–º–∏",
      category: "love"
    },
    {
      text: "–¢–æ—Ç, –∫—Ç–æ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞—Ä—É–∂—É, –º–µ—á—Ç–∞–µ—Ç; —Ç–æ—Ç, –∫—Ç–æ —Å–º–æ—Ç—Ä–∏—Ç –≤–Ω—É—Ç—Ä—å, –ø—Ä–æ–±—É–∂–¥–∞–µ—Ç—Å—è.",
      author: "–ö–∞—Ä–ª –Æ–Ω–≥",
      category: "awakening"
    },
    {
      text: "–ü–æ–∫–æ–π ‚Äî —ç—Ç–æ –Ω–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è, –∞ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ –≤ –¥–≤–∏–∂–µ–Ω–∏–∏.",
      author: "–î–∂–æ–Ω –†—ë—Å–∫–∏–Ω",
      category: "balance"
    },
    {
      text: "–°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å, ‚Äî —ç—Ç–æ –≤–∞—à–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ.",
      author: "–í–æ–ª—å—Ç–µ—Ä",
      category: "mood"
    },
    {
      text: "–î–∑–µ–Ω –Ω–µ –≥–¥–µ-—Ç–æ –µ—â–µ. –î–∑–µ–Ω –∑–¥–µ—Å—å –∏ —Å–µ–π—á–∞—Å.",
      author: "–î–∑–µ–Ω—Å–∫–∞—è –º—É–¥—Ä–æ—Å—Ç—å",
      category: "zen"
    },
    {
      text: "–ë—É–¥—å—Ç–µ –ª–∞–º–ø–æ–π –¥–ª—è —Å–µ–±—è, –±—É–¥—å—Ç–µ —É–±–µ–∂–∏—â–µ–º –¥–ª—è —Å–µ–±—è.",
      author: "–ë—É–¥–¥–∞",
      category: "self-reliance"
    },
    {
      text: "–ö—Ä–∞—Å–æ—Ç–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –≤—ã —Ä–µ—à–∞–µ—Ç–µ –±—ã—Ç—å —Å–æ–±–æ–π.",
      author: "–ö–æ–∫–æ –®–∞–Ω–µ–ª—å",
      category: "authenticity"
    },
    {
      text: "–ö–∞–∂–¥—ã–π –≤–¥–æ—Ö ‚Äî —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ.",
      author: "–ê–Ω–æ–Ω–∏–º–Ω–æ",
      category: "breathing"
    }
  ], []);

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–∏—Ç–∞—Ç—ã –¥–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞—Ç—ã
  const getDailyQuote = useCallback(() => {
    const today = new Date();
    const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
    const quoteIndex = dayOfYear % quotes.length;
    return quotes[quoteIndex];
  }, [quotes]);

  // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  const getCategoryIcon = (category) => {
    const icons = {
      meditation: "üßò‚Äç‚ôÄÔ∏è",
      happiness: "üòä",
      silence: "ü§´",
      present: "üéÅ",
      breathing: "üí®",
      peace: "‚òÆÔ∏è",
      journey: "üõ§Ô∏è",
      authenticity: "‚ú®",
      wisdom: "ü¶â",
      gratitude: "üôè",
      renewal: "üå±",
      acceptance: "ü§ó",
      compassion: "üíñ",
      simplicity: "üåø",
      love: "‚ù§Ô∏è",
      awakening: "üåÖ",
      balance: "‚öñÔ∏è",
      mood: "üåà",
      zen: "üïØÔ∏è",
      "self-reliance": "üí™",
      "self-love": "üíù"
    };
    return icons[category] || "‚ú®";
  };

  useEffect(() => {
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–∏—Ç–∞—Ç—É –¥–Ω—è
    const quote = getDailyQuote();
    setCurrentQuote(quote);

    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
    const timer = setTimeout(() => {
      setIsVisible(true);
    }, 500);

    return () => clearTimeout(timer);
  }, [getDailyQuote]);

  if (!currentQuote) return null;

  return (
    <div className={`daily-quote ${isVisible ? 'visible' : ''}`}>
      <div className="quote-container">
        <div className="quote-icon">
          {getCategoryIcon(currentQuote.category)}
        </div>
        
        <div className="quote-content">
          <blockquote className="quote-text">
            "{currentQuote.text}"
          </blockquote>
          <cite className="quote-author">
            ‚Äî {currentQuote.author}
          </cite>
        </div>
        
        <div className="quote-decoration">
          <div className="quote-marks">"</div>
        </div>
      </div>
      
      <div className="quote-footer">
        <span className="quote-label">–¶–∏—Ç–∞—Ç–∞ –¥–Ω—è</span>
        <div className="quote-sparkles">
          <span>‚ú®</span>
          <span>‚≠ê</span>
          <span>üí´</span>
        </div>
      </div>
    </div>
  );
};

export default DailyQuote;
